<!doctype html>
<html lang='en'>
<head>
<title>My Fireworks</title>
<meta charset='utf-8'>
<style>
	canvas {
		border: 1px solid black;
	}

</style>
<script>
var canvas;
var context;
var particles;
var timer;
var colors = ['pink', 'blue', 'green', 'aqua', 'purple', 'yellow', 'white']
var shapes = ['circle', 'square', 'star','heart', 'triangle'];

/*---------randomly chooses a string from the array and sets as the title-----------------*/
function makeTitle() {
	var lines = ['Wow!', 'Its So pretty!', 'Will you Marry me?', 'Lets go to Disney Land!', 'Do you wanna build a snowman?'];
	var title = '';

	for (var i=0; i<lines.length; i++) {
		var random = Math.floor(Math.random() * lines.length)
		title = lines[random];
	};
	return(title);
}

/*---------------Creates the title when the button is clicked----------------*/
function artHandler() {
	var title = makeTitle();
	drawText(canvas, context, title);
}

/*----------------Creates the different shapes when you click the button----------------*/
function placeShape(){
	var shape = shapes[Math.floor(Math.random() * shapes.length)];
if (shape === 'triangle'){
		drawTriangle(canvas, context);
		}
		 if (shape == 'star'){
			drawStar(canvas,context);
		}
	 else if (shape == 'heart'){
			drawHeart(canvas,context);
		}
}

function makeParticles(){
	particles = [];
	for (var i = 0; i<30; i++){
		particles.push(new Particle())
	}
}

function degreesToRadians(degrees){
	return(degrees*Math.PI)/180;
}

function Particle(){
	this.x = 300;
	this.y = 250;
	this.vx = Math.random()*10-5;
	this.vy = Math.random()*10-5;
	this.color = colors[Math.floor(Math.random()*colors.length)];
	this.shape = shapes[Math.floor(Math.random() * shapes.length)];

	this.radius = 30;

}
/*----------------Creates the flashing shapes---------------------*/
function  moveParticles(){
	context.globalCompositeOperation = 'source-over';
	context.fillStyle = 'rgba(0,0,0,.3)';
	context.fillRect(0,0,canvas.width, canvas.height);
	context.globalCompositeOperation = 'lighter';
	for(var i = 0; i < particles.length; i++){
		var p = particles[i];
		var color = colors[Math.floor(Math.random() * colors.length)];
		var shape = shapes[Math.floor(Math.random() * shapes.length)];
		//genertate either circles or squrares randomly
		if (shape === 'circle'){
		drawCircle(canvas, context, color);
		}
		 else if (shape == 'square'){
			drawSquare(canvas,context,color);
		}
	/*-------------creates fireworks------------------*/
		context.beginPath();
		context.arc(p.x,p.y,p.radius, 0, degreesToRadians(360), true);
		var grd = context.createLinearGradient(0, 0, canvas.width, canvas.height);

     /*-------fives the fireworks gradient color-------------*/ 
      grd.addColorStop(0, 'red');   
      grd.addColorStop(1, p.color);
      context.fillStyle = grd;
      context.fill();
		p.x += p.vx;
		p.y += p.vy;
		
		if(p.x < -50) p.x = canvas.width + 50;
		if(p.y < -50) p.y = canvas.height +50;
		if(p.x > canvas.width + 50) p.x = -50;
		if(p.y > canvas.height + 50) p.x = -50;
		if(p.radius >0) p.radius--;
	}
}
/*--------------------------------functions to create shapes-----------------------------*/
function drawSquare(canvas, context,color) {
	var w = Math.floor(Math.random() * 40);
	var x = Math.floor(Math.random() * canvas.width);
	var y = Math.floor(Math.random() * canvas.height);
	
	context.beginPath()
	context.rect(x,y,w ,w);
	context.fillStyle = "white";
	context.fill();
}
function drawCircle(canvas, context, color) {
	var radius = Math.floor(Math.random() * 40);
	var x = Math.floor(Math.random() * canvas.width);
	var y = Math.floor(Math.random() * canvas.height);
	//start drwing the path
	context.beginPath();
	context.arc(x, y, radius, 0, degreesToRadians(360), true);
	context.fillStyle = "white";
	context.fill();

}
 function drawTriangle(canvas, context,color) {
 	var x = Math.floor(Math.random() * canvas.width);
	var y = Math.floor(Math.random() * canvas.height);
		context.beginPath();
		context.moveTo(x,y);
    	context.lineTo(x+105,y+25);
    	context.lineTo(x+25,y+105);
	    context.closePath();
	    context.fillStyle = color;
        context.fill();
	  }
function drawHeart(canvas, context,color){
	var x = Math.floor(Math.random() * canvas.width);
	var y = Math.floor(Math.random() * canvas.height);
		context.beginPath();
		context.moveTo(x+75,y+40);
	  	context.bezierCurveTo(x+20,y+5,x+20,y+62.5,x+20,y+62.5);
    	context.bezierCurveTo(x+20,y+80,x+40,y+102,x+75,y+120);
    	context.bezierCurveTo(x+110,y+102,x+130,y+80,x+130,y+62.5);
    	context.bezierCurveTo(x+130,y+62.5,x+130,y+25,x+100,y+25);
    	context.bezierCurveTo(x+85,y+25,x+75,y+37,x+75,y+40);
    	context.closePath();
    	context.fill();
    	context.fillStyle = color;
  }
function drawStar(canvas, context,color){
	var x = Math.floor(Math.random() * canvas.width);
	var y = Math.floor(Math.random() * canvas.height);
	context.beginPath();
            context.moveTo(x+110, y);
            context.lineTo(x+141.2, y+67.5);
            context.lineTo(x+215.7, y+78.3);
            context.lineTo(x+161.81, y+130.9);
            context.lineTo(x+174.5, y+205.1);
            context.lineTo(x+107.8, y+170.1);
            context.lineTo(x+41.2, y+205.);
            context.lineTo(x+53.9, y+130.9);
            context.lineTo(x+0.0, y+78.3);
            context.lineTo(x+74.5, y+67.5);
            context.lineTo(x+107.8, y+0.0);
            context.closePath();
            context.fill();
           context.fillStyle = color;

        }
/*-----------------Creates text-------------------*/
   function drawText(canvas, context, title) {
	var x = Math.floor(Math.random() * canvas.width);
	var y = Math.floor(Math.random() * canvas.height);
	context.fillStyle = 'red';
	context.font = 'bold 30pt sans-serif';
	context.textAlign = 'right';
	context.fillText(title, x, y);

}

window.onload = function(){
	canvas = document.getElementById('canvas');
	context = canvas.getContext('2d');
	makeParticles();
	var button = document.getElementById('artButton');
	button.onclick = artHandler;
	var button = document.getElementById('shapeButton');
	button.onclick = placeShape;

	timer = setInterval(moveParticles,100);
	timerTwo = setInterval(makeParticles,4000);
}


</script>
</head>
<body>

<canvas id='canvas' width='600' height='500'></canvas>
	<form>
	<input type='button' id='artButton' value='How do you feel?'>
	</form>

	<form>
	<input type='button' id='shapeButton' value='Random Shape'>
	</form>

</body>
</html>